---
phase: 18-dogfooding-validation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - cocosearch.yaml
  - README.md
autonomous: true

must_haves:
  truths:
    - "Repository contains cocosearch.yaml that configures indexing CocoSearch source code"
    - "README includes section showing how to search CocoSearch with CocoSearch"
    - "New contributor can follow README to index and search the codebase"
  artifacts:
    - path: "cocosearch.yaml"
      provides: "Dogfooding configuration for indexing CocoSearch itself"
      contains: "indexName: self"
    - path: "README.md"
      provides: "Searching CocoSearch section with example commands"
      contains: "## Searching CocoSearch"
  key_links:
    - from: "README.md"
      to: "cocosearch.yaml"
      via: "references the config file for dogfooding"
      pattern: "cocosearch\\.yaml"
    - from: "README.md"
      to: "dev-setup.sh"
      via: "cross-references for full environment setup"
      pattern: "dev-setup\\.sh"
---

<objective>
Create cocosearch.yaml configuration for indexing CocoSearch's own codebase and add a README section demonstrating how to search the codebase.

Purpose: Complete the dogfooding story for v1.4 - CocoSearch uses CocoSearch to search itself, demonstrating its value and providing a real-world example for new contributors.

Output:
- `cocosearch.yaml` at repository root with minimal configuration
- "Searching CocoSearch" section in README with 3-4 example search commands
</objective>

<execution_context>
@/Users/fedorzhdanov/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fedorzhdanov/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-dogfooding-validation/18-CONTEXT.md
@.planning/phases/18-dogfooding-validation/18-RESEARCH.md
@src/cocosearch/config/schema.py
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create cocosearch.yaml dogfooding configuration</name>
  <files>cocosearch.yaml</files>
  <action>
Create cocosearch.yaml at repository root with minimal configuration:

```yaml
# CocoSearch using CocoSearch - dogfooding configuration
indexName: self

indexing:
  includePatterns:
    - "*.py"
    - "*.sh"
    - "*.bash"
    - "Dockerfile*"
    - "docker-compose*.yml"
    - "*.md"
```

Key requirements:
- Index name: `self` (meta - it indexes itself)
- Include: Python, Bash, Dockerfile, docker-compose, Markdown
- Include test files implicitly (no exclude for tests/unit/, tests/integration/)
- Rely on defaults for excludePatterns (demonstrates .gitignore works)
- Rely on defaults for chunk settings (demonstrates sensible defaults)
- Keep it minimal - shows users they don't need extensive configuration

Use camelCase for all field names per schema.py (includePatterns, NOT include_patterns).
  </action>
  <verify>
Validate config file:
```bash
uv run python -c "import yaml; y=yaml.safe_load(open('cocosearch.yaml')); print(y)"
```
Verify it matches expected structure with indexName and indexing.includePatterns.
  </verify>
  <done>
cocosearch.yaml exists at repository root with index name "self" and include patterns for Python/Bash/Docker/Markdown files.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add "Searching CocoSearch" section to README</name>
  <files>README.md</files>
  <action>
Insert new section "Searching CocoSearch" after the Quick Start section (around line 79, before Installation).

Section structure:
1. Brief intro explaining CocoSearch uses itself
2. Prerequisites one-liner (Docker + uv)
3. Index command with expected output
4. Verification command: `uv run cocosearch stats self --pretty`
5. 3-4 example search commands with annotated output:
   - Architecture/implementation query (e.g., "how does embedding work")
   - Code pattern query (e.g., "database connection handling")
   - Language-filtered query with --lang flag (e.g., "docker setup" --lang bash)
6. Link to dev-setup.sh for full environment setup

Requirements per CONTEXT.md:
- Use standalone commands with `uv run cocosearch` (doesn't assume dev-setup.sh ran)
- CLI commands only (not REPL)
- Include annotated output showing what was found (truncated, not full dump)
- Mix of implementation and architecture questions
- Include at least one example with --lang flag

Update Table of Contents to include new section.

Example format:
```markdown
## Searching CocoSearch

CocoSearch uses CocoSearch to index its own codebase. This demonstrates real-world usage and lets you explore the implementation.

### Prerequisites

Docker (for PostgreSQL) and Python 3.12+ with [uv](https://docs.astral.sh/uv/) installed.

### Index the Codebase

```bash
uv run cocosearch index . --name self
```

### Verify Indexing

```bash
uv run cocosearch stats self --pretty
```

### Example Searches

[3-4 example commands with truncated annotated output]

**Need the full development environment?** Run `./dev-setup.sh` for automated setup including Docker services.
```
  </action>
  <verify>
1. Check section exists: `grep -n "## Searching CocoSearch" README.md`
2. Check TOC updated: `grep -n "Searching CocoSearch" README.md | head -5`
3. Verify section placement: Should appear after Quick Start, before Installation
4. Verify standalone commands: All examples use `uv run cocosearch`
5. Verify --lang example exists: `grep -n "\-\-lang" README.md`
  </verify>
  <done>
README.md contains "Searching CocoSearch" section after Quick Start with 3-4 example searches including annotated output, and Table of Contents includes the new section.
  </done>
</task>

</tasks>

<verification>
Overall verification:
1. `cat cocosearch.yaml` - shows minimal config with indexName: self
2. `grep -A 5 "## Searching CocoSearch" README.md` - shows section exists with correct structure
3. `grep "Searching CocoSearch" README.md | wc -l` - should be >= 2 (TOC + section header)
4. Run example index command to verify config works: `uv run cocosearch index . --name self` (optional, requires Docker services running)
</verification>

<success_criteria>
1. cocosearch.yaml exists at repository root with indexName: self and includePatterns for Python/DevOps/Markdown
2. README.md contains "Searching CocoSearch" section after Quick Start
3. Table of Contents in README updated to include new section
4. Example commands use standalone `uv run cocosearch` format
5. At least one example shows --lang flag usage
6. Section references dev-setup.sh for full environment setup
</success_criteria>

<output>
After completion, create `.planning/phases/18-dogfooding-validation/18-01-SUMMARY.md`
</output>
